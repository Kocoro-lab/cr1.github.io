# 你画我猜 - 开发文档

## 项目概述

**项目名称**: 你画我猜 (Draw & Guess Game)
**项目类型**: Web 前端小游戏
**技术栈**: HTML5 Canvas + Vanilla JavaScript + Vite
**部署方式**: GitHub Pages

这是一个简单有趣的在线画图猜词游戏，玩家根据系统给出的词汇在画板上绘制图案，系统会对绘画进行评分。游戏完全运行在浏览器本地，无需后端服务支持。

## 项目结构

```
cr1.github.io/
├── .github/
│   └── workflows/
│       └── deploy.yml        # GitHub Actions 部署配置
├── docs/                      # 项目文档目录
│   ├── 开发文档.md            # 开发文档（本文件）
│   ├── 使用说明.md            # 用户使用说明
│   └── 技术设计.md            # 技术设计文档
├── public/                    # 静态资源目录
├── src/                       # 源代码目录
│   ├── components/           # 组件目录
│   │   └── DrawingCanvas.js  # 画板组件
│   ├── game/                 # 游戏逻辑目录
│   │   └── GameManager.js    # 游戏管理器
│   ├── styles/               # 样式目录
│   │   └── main.css          # 主样式文件
│   └── main.js               # 主入口文件
├── .editorconfig             # 编辑器配置
├── .prettierrc               # 代码格式化配置
├── .prettierignore           # Prettier 忽略文件
├── eslint.config.js          # ESLint 配置
├── .gitignore                # Git 忽略文件
├── index.html                # HTML 入口文件
├── package.json              # 项目配置文件
├── vite.config.js            # Vite 构建配置
└── README.md                 # 项目说明文件
```

## 核心模块说明

### 1. DrawingCanvas (画板组件)

**文件位置**: `src/components/DrawingCanvas.js`

**功能说明**:
- 提供基于 HTML5 Canvas 的绘图功能
- 支持鼠标和触摸事件（移动端兼容）
- 可配置画笔颜色和大小
- 提供清空画板、获取图像数据等方法

**主要方法**:
- `setupCanvas()` - 初始化画布尺寸和样式
- `startDrawing(e)` - 开始绘制
- `draw(e)` - 绘制路径
- `stopDrawing()` - 停止绘制
- `setColor(color)` - 设置画笔颜色
- `setBrushSize(size)` - 设置画笔大小
- `clear()` - 清空画板
- `getImageData()` - 获取画布图像数据
- `isEmpty()` - 检查画布是否为空

### 2. GameManager (游戏管理器)

**文件位置**: `src/game/GameManager.js`

**功能说明**:
- 管理游戏流程和状态
- 维护词库和已使用词汇记录
- 处理答案提交和评分逻辑
- 更新 UI 显示

**主要方法**:
- `initWordList()` - 初始化词库（按难度分类）
- `getRandomWord()` - 随机选择词汇
- `nextWord()` - 开始新的一题
- `submitAnswer()` - 提交答案并评分
- `evaluateDrawing()` - 评估绘画（简化版评分）
- `skipWord()` - 跳过当前题目
- `updateWordDisplay()` - 更新词汇显示
- `updateScore()` - 更新分数显示
- `showResult()` - 显示结果
- `hideResult()` - 隐藏结果

### 3. Main (主入口)

**文件位置**: `src/main.js`

**功能说明**:
- 游戏的主入口文件
- 初始化各个模块
- 绑定所有 UI 事件监听器
- 协调画板组件和游戏管理器

## 技术特点

### 1. 纯前端实现
- 无需后端服务器
- 所有逻辑在浏览器本地执行
- 数据不会上传到服务器

### 2. Canvas 绘图
- 使用原生 HTML5 Canvas API
- 流畅的绘图体验
- 支持多种颜色和笔刷大小

### 3. 响应式设计
- 适配桌面和移动端
- 触摸屏支持
- 弹性布局

### 4. 模块化开发
- ES6 模块化代码组织
- 清晰的职责划分
- 易于维护和扩展

## 开发指南

### 环境要求

- Node.js >= 16.0.0
- npm >= 7.0.0

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

启动后访问 `http://localhost:3000`

### 构建生产版本

```bash
npm run build
```

构建产物会输出到 `dist/` 目录

### 代码检查

```bash
# 检查代码问题
npm run lint

# 自动修复问题
npm run lint:fix
```

### 代码格式化

```bash
# 格式化所有代码
npm run format

# 检查代码格式
npm run format:check
```

## 扩展建议

### 1. 集成 AI 识别

当前评分逻辑是随机的演示版本，可以集成以下技术进行真实的图像识别：

- **TensorFlow.js** - 在浏览器中运行机器学习模型
- **Google Cloud Vision API** - 图像识别 API
- **自定义模型** - 训练专门的涂鸦识别模型

### 2. 多人游戏模式

可以添加以下功能实现多人游戏：

- WebSocket 或 WebRTC 实现实时通信
- 一人画，多人猜的游戏模式
- 排行榜和好友系统

### 3. 词库扩展

- 支持不同主题的词库（动物、食物、交通工具等）
- 支持用户自定义词库
- 多语言支持

### 4. 保存和分享

- 保存绘画作品到本地存储
- 生成分享链接
- 导出为图片

## 部署说明

项目已配置 GitHub Actions 自动部署，只需将代码推送到 GitHub 仓库，即可自动构建并部署到 GitHub Pages。

详见 `.github/workflows/deploy.yml` 配置文件。

## 浏览器兼容性

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 开源协议

MIT License

## 联系方式

如有问题或建议，欢迎提交 Issue 或 Pull Request。
